"use strict";(globalThis.webpackChunkteste_doc=globalThis.webpackChunkteste_doc||[]).push([[7507],{5085(e,n,r){r.r(n),r.d(n,{assets:()=>c,contentTitle:()=>d,default:()=>h,frontMatter:()=>a,metadata:()=>s,toc:()=>l});const s=JSON.parse('{"id":"apresentacao/exemplo-documento","title":"Arquivo de Contexto de Projeto","description":"1. Vis\xe3o Geral do Projeto","source":"@site/docs/apresentacao/exemplo-documento.md","sourceDirName":"apresentacao","slug":"/apresentacao/exemplo-documento","permalink":"/teste-doc/docs/apresentacao/exemplo-documento","draft":false,"unlisted":false,"editUrl":"https://github.com/lucastmartins/teste-doc/tree/main/docs/apresentacao/exemplo-documento.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Apresenta\xe7\xe3o","permalink":"/teste-doc/docs/category/apresenta\xe7\xe3o"}}');var o=r(4848),i=r(8453);const a={},d="Arquivo de Contexto de Projeto",c={},l=[{value:"1. Vis\xe3o Geral do Projeto",id:"1-vis\xe3o-geral-do-projeto",level:2},{value:"2. Stack Tecnol\xf3gica",id:"2-stack-tecnol\xf3gica",level:2},{value:"3. Regras de Neg\xf3cio (Business Logic)",id:"3-regras-de-neg\xf3cio-business-logic",level:2},{value:"3.1. Frontend (O &quot;Gatekeeper&quot;)",id:"31-frontend-o-gatekeeper",level:3},{value:"3.2. Backend (A F\xe1brica)",id:"32-backend-a-f\xe1brica",level:3},{value:"4. Estrutura de Arquivos Sugerida",id:"4-estrutura-de-arquivos-sugerida",level:2},{value:"5. Plano de Implementa\xe7\xe3o (Passo a Passo para o Agente)",id:"5-plano-de-implementa\xe7\xe3o-passo-a-passo-para-o-agente",level:2},{value:"Fase 1: Setup do Ambiente (Docker)",id:"fase-1-setup-do-ambiente-docker",level:3},{value:"Fase 2: Backend - Core Logic",id:"fase-2-backend---core-logic",level:3},{value:"Fase 3: Backend - API Router",id:"fase-3-backend---api-router",level:3},{value:"Fase 4: Frontend - L\xf3gica de Valida\xe7\xe3o",id:"fase-4-frontend---l\xf3gica-de-valida\xe7\xe3o",level:3},{value:"Fase 5: Integra\xe7\xe3o",id:"fase-5-integra\xe7\xe3o",level:3},{value:"6. Prompt Inicial para o Agente",id:"6-prompt-inicial-para-o-agente",level:2}];function t(e){const n={code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"arquivo-de-contexto-de-projeto",children:"Arquivo de Contexto de Projeto"})}),"\n",(0,o.jsx)(n.h2,{id:"1-vis\xe3o-geral-do-projeto",children:"1. Vis\xe3o Geral do Projeto"}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Objetivo:"})," Desenvolver uma aplica\xe7\xe3o fullstack (API + Web Client) para convers\xe3o de documenta\xe7\xe3o t\xe9cnica. O sistema recebe Markdown + Anexos, valida a integridade dos arquivos e gera documentos formatados (PDF ou Docx) baseados em templates corporativos e vari\xe1veis din\xe2micas."]}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Prioridade:"})," Robustez na valida\xe7\xe3o de arquivos (frontend) e fidelidade visual na convers\xe3o (backend)."]}),"\n",(0,o.jsx)(n.h2,{id:"2-stack-tecnol\xf3gica",children:"2. Stack Tecnol\xf3gica"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Backend:"})," Python 3.11+ (FastAPI)."]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"Motores de Convers\xe3o:"})}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.code,{children:"Pandoc"})," (Core engine)."]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.code,{children:"WeasyPrint"})," (para renderiza\xe7\xe3o PDF via HTML)."]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.code,{children:"Jinja2"})," (para inje\xe7\xe3o de vari\xe1veis em templates HTML)."]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Frontend:"})," React (Vite) + TailwindCSS + ",(0,o.jsx)(n.code,{children:"lucide-react"})," (\xedcones)."]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Infra:"})," Docker (essencial para empacotar bin\xe1rios do Pandoc e fontes)."]}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h2,{id:"3-regras-de-neg\xf3cio-business-logic",children:"3. Regras de Neg\xf3cio (Business Logic)"}),"\n",(0,o.jsx)(n.h3,{id:"31-frontend-o-gatekeeper",children:'3.1. Frontend (O "Gatekeeper")'}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Input Misto:"})," O usu\xe1rio pode colar texto Markdown OU fazer upload de um arquivo ",(0,o.jsx)(n.code,{children:".md"}),"."]}),"\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.strong,{children:"Valida\xe7\xe3o de Integridade (Cr\xedtico):"})}),"\n"]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["O sistema deve fazer ",(0,o.jsx)(n.em,{children:"parse"})," do texto Markdown em tempo real procurando o padr\xe3o ",(0,o.jsx)(n.code,{children:"![alt](src)"}),"."]}),"\n",(0,o.jsxs)(n.li,{children:["Deve comparar a lista de ",(0,o.jsx)(n.code,{children:"src"})," encontrados com a lista de arquivos anexados pelo usu\xe1rio (drag & drop)."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Bloqueio:"}),' O bot\xe3o "Gerar Documento" deve ficar desabilitado se houver imagens no Markdown que n\xe3o foram anexadas.']}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Feedback:"}),' Exibir lista visual: "Esperado: ',(0,o.jsx)(n.code,{children:"img1.png"}),' (\u274c Faltando)".']}),"\n"]}),"\n",(0,o.jsxs)(n.ol,{start:"3",children:["\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.strong,{children:"Configura\xe7\xe3o de Template:"})}),"\n"]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"O usu\xe1rio seleciona o formato de sa\xedda: PDF ou Docx."}),"\n",(0,o.jsxs)(n.li,{children:["Inputs opcionais para vari\xe1veis: ",(0,o.jsx)(n.code,{children:"{{NAME}}"}),", ",(0,o.jsx)(n.code,{children:"{{DATE}}"}),", ",(0,o.jsx)(n.code,{children:"{{VERSION}}"}),"."]}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"32-backend-a-f\xe1brica",children:"3.2. Backend (A F\xe1brica)"}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Endpoint:"})," ",(0,o.jsx)(n.code,{children:"POST /api/convert"}),"."]}),"\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.strong,{children:"Tratamento de Quebra de P\xe1gina:"})}),"\n"]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["O usu\xe1rio usar\xe1 a string ",(0,o.jsx)(n.code,{children:"<<<PAGEBREAK>>>"})," no Markdown."]}),"\n",(0,o.jsxs)(n.li,{children:["Se Output == PDF: Substituir por ",(0,o.jsx)(n.code,{children:'<div style="page-break-after: always;"></div>'}),"."]}),"\n",(0,o.jsx)(n.li,{children:"Se Output == Docx: Substituir por XML OpenXML de quebra de p\xe1gina (raw block do Pandoc)."}),"\n"]}),"\n",(0,o.jsxs)(n.ol,{start:"3",children:["\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.strong,{children:"Fluxo de Convers\xe3o PDF:"})}),"\n"]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Markdown  HTML (Pandoc)."}),"\n",(0,o.jsx)(n.li,{children:"Inje\xe7\xe3o do HTML no Template Jinja2 (Header/Footer)."}),"\n",(0,o.jsxs)(n.li,{children:["Renderiza\xe7\xe3o final via ",(0,o.jsx)(n.code,{children:"WeasyPrint"}),"."]}),"\n"]}),"\n",(0,o.jsxs)(n.ol,{start:"4",children:["\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.strong,{children:"Fluxo de Convers\xe3o Docx:"})}),"\n"]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["Uso do argumento ",(0,o.jsx)(n.code,{children:"--reference-doc"})," do Pandoc."]}),"\n",(0,o.jsx)(n.li,{children:"Vari\xe1veis s\xe3o passadas via metadados do Pandoc."}),"\n"]}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h2,{id:"4-estrutura-de-arquivos-sugerida",children:"4. Estrutura de Arquivos Sugerida"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-text",children:"/project-root\n\u251c\u2500\u2500 docker-compose.yml\n\u251c\u2500\u2500 /backend\n\u2502   \u251c\u2500\u2500 Dockerfile            # Deve instalar pandoc e weasyprint dependencies\n\u2502   \u251c\u2500\u2500 requirements.txt\n\u2502   \u251c\u2500\u2500 main.py               # Setup FastAPI\n\u2502   \u251c\u2500\u2500 /routers\n\u2502   \u2502   \u2514\u2500\u2500 convert.py        # L\xf3gica de recebimento de arquivos\n\u2502   \u251c\u2500\u2500 /services\n\u2502   \u2502   \u251c\u2500\u2500 converter_pdf.py  # L\xf3gica MD -> HTML -> PDF\n\u2502   \u2502   \u2514\u2500\u2500 converter_docx.py # L\xf3gica MD -> Docx (Pandoc wrapper)\n\u2502   \u251c\u2500\u2500 /templates\n\u2502   \u2502   \u251c\u2500\u2500 base_layout.html  # Jinja2 template para PDF\n\u2502   \u2502   \u2514\u2500\u2500 reference.docx    # Template padr\xe3o Word\n\u2502   \u2514\u2500\u2500 /utils\n\u2502       \u2514\u2500\u2500 file_manager.py   # Gest\xe3o de arquivos tempor\xe1rios\n\u251c\u2500\u2500 /frontend\n\u2502   \u251c\u2500\u2500 package.json\n\u2502   \u251c\u2500\u2500 tailwind.config.js\n\u2502   \u2514\u2500\u2500 /src\n\u2502       \u251c\u2500\u2500 /components\n\u2502       \u2502   \u251c\u2500\u2500 EditorArea.jsx      # Onde cola o MD\n\u2502       \u2502   \u251c\u2500\u2500 AttachmentZone.jsx  # Drag & drop de imagens\n\u2502       \u2502   \u2514\u2500\u2500 ValidationStatus.jsx # Lista de checagem (match MD vs Files)\n\u2502       \u2514\u2500\u2500 App.jsx\n\n"})}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h2,{id:"5-plano-de-implementa\xe7\xe3o-passo-a-passo-para-o-agente",children:"5. Plano de Implementa\xe7\xe3o (Passo a Passo para o Agente)"}),"\n",(0,o.jsx)(n.h3,{id:"fase-1-setup-do-ambiente-docker",children:"Fase 1: Setup do Ambiente (Docker)"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Tarefa:"})," Criar o ",(0,o.jsx)(n.code,{children:"backend/Dockerfile"}),"."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Requisito:"})," Base image ",(0,o.jsx)(n.code,{children:"python:3.11-slim"}),". Instalar ",(0,o.jsx)(n.code,{children:"pandoc"})," (via apt-get), ",(0,o.jsx)(n.code,{children:"texlive"})," (opcional, se usar xelatex, mas preferir weasyprint para HTML->PDF) e bibliotecas do Pango/GDK para o WeasyPrint."]}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"fase-2-backend---core-logic",children:"Fase 2: Backend - Core Logic"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Tarefa:"})," Criar ",(0,o.jsx)(n.code,{children:"services/converter_pdf.py"}),"."]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"Deve receber texto MD e um dicion\xe1rio de vari\xe1veis."}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"Converter MD para HTML fragment."}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"Renderizar template Jinja2 (inserindo o fragmento no body e as vari\xe1veis no Header/Footer)."}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"Gerar bin\xe1rio PDF."}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Tarefa:"})," Criar ",(0,o.jsx)(n.code,{children:"services/converter_docx.py"}),"."]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["Usar ",(0,o.jsx)(n.code,{children:"pypandoc"})," ou ",(0,o.jsx)(n.code,{children:"subprocess"})," para chamar pandoc."]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["Mapear vari\xe1veis do request para ",(0,o.jsx)(n.code,{children:"-M key=value"})," do pandoc."]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["Tratar a tag ",(0,o.jsx)(n.code,{children:"<<<PAGEBREAK>>>"})," antes da convers\xe3o."]}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"fase-3-backend---api-router",children:"Fase 3: Backend - API Router"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Tarefa:"})," Criar rota ",(0,o.jsx)(n.code,{children:"POST /convert"}),"."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Inputs:"})," ",(0,o.jsx)(n.code,{children:"Form(...)"})," para metadados e ",(0,o.jsx)(n.code,{children:"UploadFile"})," (lista) para anexos e template customizado (opcional)."]}),"\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.strong,{children:"Processo:"})}),"\n"]}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsx)(n.li,{children:"Criar diret\xf3rio tempor\xe1rio \xfanico (UUID)."}),"\n",(0,o.jsx)(n.li,{children:"Salvar todos os anexos l\xe1."}),"\n",(0,o.jsx)(n.li,{children:"Ajustar caminhos das imagens no Markdown para apontar para esse diret\xf3rio tempor\xe1rio."}),"\n",(0,o.jsx)(n.li,{children:"Chamar o service de convers\xe3o adequado."}),"\n",(0,o.jsxs)(n.li,{children:["Limpar diret\xf3rio tempor\xe1rio (",(0,o.jsx)(n.code,{children:"finally"}),")."]}),"\n",(0,o.jsxs)(n.li,{children:["Retornar ",(0,o.jsx)(n.code,{children:"FileResponse"}),"."]}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"fase-4-frontend---l\xf3gica-de-valida\xe7\xe3o",children:"Fase 4: Frontend - L\xf3gica de Valida\xe7\xe3o"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Tarefa:"})," Criar componente ",(0,o.jsx)(n.code,{children:"EditorArea"}),"."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"L\xf3gica:"})," Usar Regex ",(0,o.jsx)(n.code,{children:"/!\\[.*?\\]\\((.*?)\\)/g"})," no ",(0,o.jsx)(n.code,{children:"onChange"})," do texto. Extrair array de filenames esperados."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Tarefa:"})," Criar componente ",(0,o.jsx)(n.code,{children:"AttachmentZone"})," usando ",(0,o.jsx)(n.code,{children:"react-dropzone"}),". Manter estado ",(0,o.jsx)(n.code,{children:"files[]"}),"."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Tarefa:"})," L\xf3gica de Cruzamento."]}),"\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.code,{children:"missingFiles = expectedFiles.filter(f => !uploadedFiles.includes(f))"})}),"\n",(0,o.jsxs)(n.li,{children:["Se ",(0,o.jsx)(n.code,{children:"missingFiles.length > 0"}),", desabilitar bot\xe3o de envio."]}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"fase-5-integra\xe7\xe3o",children:"Fase 5: Integra\xe7\xe3o"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Tarefa:"})," Conectar o ",(0,o.jsx)(n.code,{children:"FormData"})," do Frontend com o endpoint FastAPI."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Requisito:"})," Garantir que o download do Blob (PDF/Docx) inicie automaticamente ap\xf3s a resposta da API."]}),"\n"]}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h2,{id:"6-prompt-inicial-para-o-agente",children:"6. Prompt Inicial para o Agente"}),"\n",(0,o.jsxs)(n.p,{children:['"Atue como um Engenheiro de Software S\xeanior Especialista em Python e React. Eu tenho um arquivo de especifica\xe7\xe3o (',(0,o.jsx)(n.code,{children:"PROJECT_SPEC.md"}),") acima. Quero que voc\xea comece implementando a ",(0,o.jsx)(n.strong,{children:"Fase 1 e Fase 2"})," (Ambiente Docker e L\xf3gica Core do Backend). Por favor, escreva o ",(0,o.jsx)(n.code,{children:"backend/Dockerfile"})," robusto para suportar Pandoc e WeasyPrint, e em seguida escreva o c\xf3digo Python para os servi\xe7os de convers\xe3o (",(0,o.jsx)(n.code,{children:"converter_pdf.py"})," e ",(0,o.jsx)(n.code,{children:"converter_docx.py"}),') focando no tratamento da quebra de p\xe1gina customizada e substitui\xe7\xe3o de vari\xe1veis."']})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(t,{...e})}):t(e)}},8453(e,n,r){r.d(n,{R:()=>a,x:()=>d});var s=r(6540);const o={},i=s.createContext(o);function a(e){const n=s.useContext(i);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:a(e.components),s.createElement(i.Provider,{value:n},e.children)}}}]);